import { OpenAPIGenerator } from "zod-to-openapi";
import { grundformsOutputSchema } from "../../schemas/grundformSchema";

const instructions = `<agent_background>
  You are a very smart and very helpful German language expert. You have deep expertise in linguistics and a thorough understanding of the edge cases of the language. You are very familiar with resources such as "grammis.ids-mannheim.de" and "verbformen.de" and may even be a contributor.
</agent_background>
<agent_role>
  Your task is to help the student navigate the German language. The student gives you a note with a German word or a short phrase, you must tell him all the possible ways of interptriting the note, linking the it's contents to varios feasible grundforms.
</agent_role>
<instructions>
  Your task is to generate a valid JSON object for every input word or expression, strictly following the provided JSON schema. Beyond simply assigning schema fields, incorporate your deep understanding of German language intricacies:
  - The note might contain small errors and is case insensitive (ex. a valid grundform of "sie" is "Sie")
  - Recognize and differentiate multiple parts of speech for a single word (e.g., a word that may function as both a noun and a verb).
  - Include additional fields for verbs such as canBeRexlexiv, separability, verbForms, and notableGoverningPrepositions, reflecting both common and edge-case conjugation patterns.
  - Address ambiguous forms by providing multiple objects when necessary.
  - Use concise emoji descriptions (up to 3 emojis) as visual cues that capture subtle differences in meaning.
  - Your output should consist solely of the final JSON without any extra commentary.
  - If the note does not contain any known idioms, or the word in in contains too many mistakes for recognotion, fallback to Unbekannt case
</instructions>`;

const examples = `<examples><example><note>sie</note><grundforms>[{wortart:"Pronomen",rechtschreibung:"sie",grundform:"sie",emojiBeschreibung:"ğŸ‘©",pronomenType:"Personal",number:["Einzahl"],genus:["Feminin"]},{wortart:"Pronomen",rechtschreibung:"sie",grundform:"sie",emojiBeschreibung:"ğŸ‘¥",pronomenType:"Personal",number:["Mehrzahl"]},{wortart:"Pronomen",rechtschreibung:"Sie",grundform:"sie",emojiBeschreibung:"ğŸ§‘â€ğŸ’¼",pronomenType:"Personal",number:["Einzahl","Mehrzahl"]}]</JSON></grundforms>,<example><note>glaubiger</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"glÃ¤ubiger",grundform:"glÃ¤ubig",emojiBeschreibung:"ğŸ™"},{wortart:"Nomen",rechtschreibung:"GlÃ¤ubiger",grundform:"GlÃ¤ubiger",emojiBeschreibung:"ğŸ’°",genus:"Maskulin",deklination:"Stark"}]</JSON></grundforms>,<example><note>genau</note><grundforms>[{wortart:"Adverb",rechtschreibung:"genau",grundform:"genau",emojiBeschreibung:"âœ”ï¸",category:["Modal"]},{wortart:"Adjektiv",rechtschreibung:"genau",grundform:"genau",emojiBeschreibung:"âœ”ï¸"}]</JSON></grundforms>,<example><note>genauso</note><grundforms>[{wortart:"Adverb",rechtschreibung:"genauso",grundform:"genauso",emojiBeschreibung:"ğŸ¤",category:["Modal"]}]</JSON></grundforms>,<example><note>fussballbegeistert</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"fuÃŸballbegeistert",grundform:"fuÃŸballbegeistert",emojiBeschreibung:"âš½ï¸ğŸ”¥"}]</JSON></grundforms>,<example><note>sofort</note><grundforms>[{wortart:"Adverb",rechtschreibung:"sofort",grundform:"sofort",emojiBeschreibung:"â±ï¸",category:["Temporal"]}]</JSON></grundforms>,<example><note>zwar</note><grundforms>[{wortart:"Partikel",rechtschreibung:"zwar",grundform:"zwar",emojiBeschreibung:"ğŸ”—",partikelType:["Konnektiv"]}]</JSON></grundforms>,<example><note>Weiss</note><grundforms>[{wortart:"Verb",rechtschreibung:"weiÃŸ",grundform:"wissen",emojiBeschreibung:"ğŸ§ ",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["weiÃŸ"],["wusste"],["gewusst"]]},{wortart:"Nomen",rechtschreibung:"WeiÃŸ",grundform:"das WeiÃŸ",emojiBeschreibung:"âšªï¸",genus:"Neutrum",deklination:"Stark"},{wortart:"Adjektiv",rechtschreibung:"weiÃŸ",grundform:"weiÃŸ",emojiBeschreibung:"âšªï¸"}]</JSON></grundforms>,<example><note>erinern</note><grundforms>[{wortart:"Verb",rechtschreibung:"erinnern",grundform:"erinnern",emojiBeschreibung:"ğŸ§ ",canBeRexlexiv:true,verbForms:[["erinnert"],["erinnerte"],["erinnert"]],notableGoverningPrepositions:["an"]}]</JSON></grundforms>,<example><note>rechnen</note><grundforms>[{wortart:"Verb",rechtschreibung:"rechnen",grundform:"rechnen",emojiBeschreibung:"ğŸ§®",canBeRexlexiv:false,verbForms:[["rechnet"],["rechnete"],["gerechnet"]],notableGoverningPrepositions:["mit","auf","in","als"]}]</JSON></grundforms>,<example><note>nieser</note><grundforms>[{wortart:"Verb",rechtschreibung:"niest",grundform:"niesen",emojiBeschreibung:"ğŸ¤§",canBeRexlexiv:false,verbForms:[["niest"],["nieste"],["geniest"]]},{wortart:"Nomen",rechtschreibung:"Nieser",grundform:"Nieser",emojiBeschreibung:"ğŸ¤§",genus:"Maskulin",deklination:"Schwach"}]</JSON></grundforms>,<example><note>sitz</note><grundforms>[{wortart:"Verb",rechtschreibung:"sitz",grundform:"sitzen",emojiBeschreibung:"ğŸ’º",canBeRexlexiv:true,verbForms:[["sitzt"],["saÃŸ"],["gesessen"]]},{wortart:"Nomen",rechtschreibung:"Sitz",grundform:"Sitz",emojiBeschreibung:"ğŸª‘",genus:"Maskulin",deklination:"Stark"}]</JSON></grundforms>,<example><note>sitzen</note><grundforms>[{wortart:"Verb",rechtschreibung:"sitzen",grundform:"sitzen",emojiBeschreibung:"ğŸ’º",canBeRexlexiv:true,verbForms:[["sitzt"],["saÃŸ"],["gesessen"]]}]</JSON></grundforms>,<example><note>aufgepast</note><grundforms>[{wortart:"Verb",rechtschreibung:"aufgepasst",grundform:"aufpassen",emojiBeschreibung:"ğŸ‘€",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["passt auf"],["passte auf"],["aufgepasst"]]}]</JSON></grundforms>,<example><note>untergen</note><grundforms>[{wortart:"Verb",rechtschreibung:"untergehen",grundform:"untergehen",emojiBeschreibung:"ğŸŒ…",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["geht unter"],["ging unter"],["untergegangen"]]}]</JSON></grundforms>,<example><note>Hoffungen</note><grundforms>[{wortart:"Nomen",rechtschreibung:"Hoffnungen",grundform:"Hoffnung",emojiBeschreibung:"ğŸ™",genus:"Feminin",deklination:"Stark"}]</JSON></grundforms>,<example><note>hÃ¤ngstauf</note><grundforms>[{wortart:"Verb",rechtschreibung:"hÃ¤ngst auf",grundform:"aufhÃ¤ngen",emojiBeschreibung:"ğŸ–¼ï¸",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["hÃ¤ngt auf"],["hing auf"],["aufgehÃ¤ngt"]]}]</JSON></grundforms>,<example><note>hiemwerken</note><grundforms>[{wortart:"Verb",rechtschreibung:"heimwerken",grundform:"heimwerken",emojiBeschreibung:"ğŸ”¨",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["heimwerkt"],["heimwarkte"],["heimgearbeitet"]]},{wortart:"Nomen",rechtschreibung:"Heimwerken",grundform:"Heimwerk",emojiBeschreibung:"ğŸ› ",genus:"Neutrum",deklination:"Stark"}]</JSON></grundforms>,<example><note>klares</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"klares",grundform:"klar",emojiBeschreibung:"âœ¨"}]</JSON></grundforms>,<example><note>Rechercheergbnisse</note><grundforms>[{wortart:"Nomen",rechtschreibung:"Rechercheergebnisse",grundform:"Rechercheergebnis",emojiBeschreibung:"ğŸ”",genus:"Neutrum",deklination:"Stark"}]</JSON></grundforms>,<example><note>backen</note><grundforms>[{wortart:"Verb",rechtschreibung:"backen",grundform:"backen",emojiBeschreibung:"ğŸ",canBeRexlexiv:false,verbForms:[["backt","bÃ¤ckt"],["buk"],["gebacken"]]},{wortart:"Verb",rechtschreibung:"backen",grundform:"backen",emojiBeschreibung:"ğŸ",canBeRexlexiv:false,verbForms:[["backt"],["backte"],["gebacken"]]},{wortart:"Nomen",rechtschreibung:"Backe",grundform:"Backe",emojiBeschreibung:"ğŸ˜Š",genus:"Feminin",deklination:"Stark"}]</JSON></grundforms>,<example><note>unbandiges</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"unbandiges",grundform:"unbÃ¤ndig",emojiBeschreibung:"ğŸ”¥"},]</JSON></grundforms>,<example><note>See</note><grundforms>[{wortart:"Nomen",rechtschreibung:"See",grundform:"See",emojiBeschreibung:"ğŸ",genus:"Maskulin",deklination:"Stark"},{wortart:"Nomen",rechtschreibung:"See",grundform:"See",emojiBeschreibung:"ğŸŒŠ",genus:"Feminin",deklination:"Stark"}]</JSON></grundforms>,<example><note>trotz</note><grundforms>[{wortart:"Praeposition",rechtschreibung:"trotz",grundform:"trotz",emojiBeschreibung:"ğŸ›¡",possibleGoverningKasuss:["Genitiv"]},{wortart:"Nomen",rechtschreibung:"Trotz",grundform:"Trotz",emojiBeschreibung:"ğŸ˜¤",genus:"Maskulin",deklination:"Stark",isProperNoun:false},{wortart:"Verb",rechtschreibung:"trotzen",grundform:"trotzen",emojiBeschreibung:"ğŸ˜¤",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["trotzt"],["trotzte"],["getrotzt"]]}]</JSON></grundforms>,<example><note>mit</note><grundforms>[{wortart:"Praeposition",rechtschreibung:"mit",grundform:"mit",emojiBeschreibung:"ğŸ¤",possibleGoverningKasuss:["Dativ"]},{wortart:"Praefix",rechtschreibung:"mit",grundform:"mit",emojiBeschreibung:"ğŸ¤"}]</JSON></grundforms>,<example><note>an</note><grundforms>[{wortart:"Praeposition",rechtschreibung:"an",grundform:"an",emojiBeschreibung:"ğŸ“",possibleGoverningKasuss:["Dativ","Akkusativ"]},{wortart:"Praefix",rechtschreibung:"an",grundform:"an",emojiBeschreibung:"ğŸ“"}]</JSON></grundforms>,<example><note>uber</note><grundforms>[{wortart:"Praeposition",rechtschreibung:"Ã¼ber",grundform:"Ã¼ber",emojiBeschreibung:"ğŸ”",possibleGoverningKasuss:["Dativ","Akkusativ"]},{wortart:"Praefix",rechtschreibung:"Ã¼ber",grundform:"Ã¼ber",emojiBeschreibung:"ğŸ”"},{wortart:"Nomen",rechtschreibung:"Uber",grundform:"Uber",emojiBeschreibung:"ğŸ™ï¸",genus:"Neutrum",deklination:"Stark",isProperNoun:true}]</JSON></grundforms>,<example><note>selbst</note><grundforms>[{wortart:"Adverb",rechtschreibung:"selbst",grundform:"selbst",emojiBeschreibung:"ğŸ™‹",category:["Modal"]},{wortart:"Nomen",rechtschreibung:"Selbst",grundform:"Selbst",emojiBeschreibung:"ğŸª",genus:"Neutrum",deklination:"Stark"},]</JSON></grundforms>,<example><note>umfaren</note><grundforms>[{wortart:"Verb",rechtschreibung:"umfahren",grundform:"umfahren",emojiBeschreibung:"ğŸš—ğŸ’¥",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["fÃ¤hrt um"],["fuhr um"],["umgefahren"]]},{wortart:"Verb",rechtschreibung:"umfahren",grundform:"umfahren",emojiBeschreibung:"ğŸš—ğŸ›£ï¸",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["umfÃ¤hrt"],["umfuhr"],["umgefahren"]]},{wortart:"Nomen",rechtschreibung:"Umfahren",grundform:"Umfahrt",emojiBeschreibung:"ğŸ›£ï¸",genus:"Feminin",deklination:"Stark"}]</JSON></grundforms>,<example><note>geoffnet</note><grundforms>[{wortart:"PartizipialesAdjektiv",rechtschreibung:"geÃ¶ffnet",grundform:"Ã¶ffnen",emojiBeschreibung:"ğŸšªğŸ‘",partizipvariante:"P2"},]</JSON></grundforms>,<example><note>verfallen</note><grundforms>[{wortart:"Verb",rechtschreibung:"verfallen",grundform:"verfallen",emojiBeschreibung:"ğŸšï¸",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["verfÃ¤llt"],["verfiel"],["verfallen"]]},{wortart:"PartizipialesAdjektiv",rechtschreibung:"verfallen",grundform:"verfallen",emojiBeschreibung:"ğŸšï¸",partizipvariante:"P2"}]</JSON></grundforms>,<example><note>Schloss</note><grundforms>[{wortart:"Nomen",rechtschreibung:"Schloss",grundform:"Schloss",emojiBeschreibung:"ğŸ°",genus:"Neutrum",deklination:"Stark",isProperNoun:false},{wortart:"Nomen",rechtschreibung:"Schloss",grundform:"Schloss",emojiBeschreibung:"ğŸ”’",genus:"Neutrum",deklination:"Stark",isProperNoun:false},{wortart:"Verb",rechtschreibung:"Schloss",grundform:"schlieÃŸen",emojiBeschreibung:"ğŸšªğŸ”’",canBeRexlexiv:false,regularity:"UnregelmÃ¤ÃŸig",conjugation:"Stark",separability:"Untrennbar"}]</JSON></grundforms>,<example><note>gehobener</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"gehoben",grundform:"gehoben",emojiBeschreibung:"ğŸ©"}]</JSON></grundforms>,<example><note>wahlwiese</note><grundforms>[{wortart:"Adverb",rechtschreibung:"wahlweise",grundform:"wahlweise",emojiBeschreibung:"ğŸ”€",category:["Modal"]}]</JSON></grundforms>,<example><note>deutschen</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"deutschen",grundform:"deutsch",emojiBeschreibung:"ğŸ‡©ğŸ‡ª"},{wortart:"Nomen",rechtschreibung:"Deutsche",grundform:"Deutsche",emojiBeschreibung:"ğŸ‡©ğŸ‡ª",genus:"Neutrum",deklination:"Stark",isProperNoun:false}]</JSON></grundforms>,<example><note>Wende</note><grundforms>[{wortart:"Nomen",rechtschreibung:"Wende",grundform:"Wende",emojiBeschreibung:"ğŸ”„",genus:"Feminin",deklination:"Stark",isProperNoun:false},{wortart:"Verb",rechtschreibung:"wende",grundform:"wenden",emojiBeschreibung:"â†©ï¸",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["wendet"],["wendete"],["gewendet"]]}]</JSON></grundforms>,<example><note>stapelbaren</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"stapelbaren",grundform:"stapelbar",emojiBeschreibung:"ğŸ“¦"}]</JSON></grundforms>,<example><note>vorbei</note><grundforms>[{wortart:"Praeposition",rechtschreibung:"vorbei",grundform:"vorbei",emojiBeschreibung:"ğŸƒâ€â™‚ï¸ğŸ’¨"},{wortart:"Adverb",rechtschreibung:"vorbei",grundform:"vorbei",emojiBeschreibung:"ğŸ",category:["Lokal"]}]</JSON></grundforms>,<example><note>spazirengegangen</note><grundforms>[{wortart:"Verb",rechtschreibung:"spazieren gegangen",grundform:"spazieren gehen",emojiBeschreibung:"ğŸš¶â€â™‚ï¸",canBeRexlexiv:false,separability:"Trennbar",verbForms:[["geht spazieren"],["ging spazieren"],["spazieren gegangen"]]}]</JSON></grundforms>,<example><note>doch</note><grundforms>[{wortart:"Partikel",rechtschreibung:"doch",grundform:"doch",emojiBeschreibung:"ğŸ’¬",partikelType:["Konnektiv"]}]</JSON></grundforms>,<example><note>aÂ â€“Â dasÂ KissenÂ habâ€™Â ichÂ auchÂ [[bekommen]].  \nAberÂ esÂ istÂ vorbei!Â [[vorbei]]!Â UndÂ [[jetzt]]Â [[heul]]Â bitteÂ nicht!  \nTschÃ¼s.  \nMÃ¤nner!</note><grundforms>[{wortart:"Unbekannt",rechtschreibung:"Unbekannt",grundform:"Unbekannt",emojiBeschreibung:"â“"}]</JSON></grundforms>,<example><note>Laden</note><grundforms>[{wortart:"Verb",rechtschreibung:"laden",grundform:"laden",emojiBeschreibung:"ğŸ“¦",canBeRexlexiv:false,regularity:"RegelmÃ¤ÃŸig",conjugation:"Schwach"},{wortart:"Nomen",rechtschreibung:"Laden",grundform:"Laden",emojiBeschreibung:"ğŸª",genus:"Maskulin",deklination:"Stark",isProperNoun:false}]</JSON></grundforms>,<example><note>gefallen</note><grundforms>[{wortart:"Verb",rechtschreibung:"gefallen",grundform:"gefallen",emojiBeschreibung:"ğŸ‘",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["gefÃ¤llt"],["gefiel"],["gefallen"]]},{wortart:"PartizipialesAdjektiv",rechtschreibung:"gefallen",grundform:"gefallen",emojiBeschreibung:"ğŸ‘",partizipvariante:"P2"}]</JSON></grundforms>,<example><note>Das Eis zwischen sie ist gebrochen</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"Das Eis brechen",grundform:"Das Eis brechen",emojiBeschreibung:"â„ï¸ğŸ§Š"}]</JSON></grundforms>,<example><note>klar</note><grundforms>[{wortart:"Adjektiv",rechtschreibung:"klar",grundform:"klar",emojiBeschreibung:"âœ¨"},{wortart:"Adverb",rechtschreibung:"klar",grundform:"klar",emojiBeschreibung:"âœ¨",category:["Grad"]},{wortart:"Nomen",rechtschreibung:"das Klare",grundform:"das Klare",emojiBeschreibung:"âœ¨",genus:"Neutrum",deklination:"Stark"}]</JSON></grundforms>,<example><note>mleken</note><grundforms>[{wortart:"Verb",rechtschreibung:"melken",grundform:"melken",emojiBeschreibung:"ğŸ„",canBeRexlexiv:false,verbForms:[["melkt"],["melkte"],["gemelkt"]]},{wortart:"Verb",rechtschreibung:"melken",grundform:"melken",emojiBeschreibung:"ğŸ„",canBeRexlexiv:false,verbForms:[["melkt","milkt"],["molk"],["gemelkt","gemolken"]]}]</JSON></grundforms>,<example><note>bewegen</note><grundforms>[{wortart:"Verb",rechtschreibung:"bewegen",grundform:"bewegen",emojiBeschreibung:"ğŸƒ",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["bewegt"],["bewegte"],["bewegt"]]},{wortart:"Verb",rechtschreibung:"bewegen",grundform:"bewegen",emojiBeschreibung:"â¤ï¸",canBeRexlexiv:false,separability:"Untrennbar",verbForms:[["bewegt"],["bewog"],["bewegt"]]}]</JSON></grundforms>,<example><note>senden</note><grundforms>[{wortart:"Verb",rechtschreibung:"senden",grundform:"senden",emojiBeschreibung:"ğŸ“¤",canBeRexlexiv:false,verbForms:[["sendet"],["sendete"],["gesendet"]]},{wortart:"Verb",rechtschreibung:"senden",grundform:"senden",emojiBeschreibung:"ğŸ“¡",canBeRexlexiv:false,verbForms:[["sendet"],["sandte"],["gesandt"]]}]</JSON></grundforms>,<example><note>eis zwischen ihnen ist gebrochen</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"das Eis zwischen ihnen ist gebrochen",grundform:"das Eis brechen",emojiBeschreibung:"ğŸ¤"}]</JSON></grundforms>,<example><note>halben Miete</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"halbe Miete",grundform:"die halbe Miete",emojiBeschreibung:"ğŸ”‘ğŸ§©ğŸ¯"}]</JSON></grundforms>,<example><note>ganz und gar</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"ganz und gar",grundform:"ganz und gar",emojiBeschreibung:"ğŸ’¯ğŸ‘Œ"}]</JSON></grundforms>,<example><note>tomaten auf den Augen?</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"Tomaten auf den Augen?",grundform:"Tomaten auf den Augen haben",emojiBeschreibung:"ğŸ…ğŸ™ˆğŸ¤·â€â™‚ï¸"}]</JSON></grundforms>,<example><note>mir der BÃ¤r aufgebracht</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"Mir ist der BÃ¤r aufgebracht",grundform:"Einen BÃ¤ren aufbinden",emojiBeschreibung:"ğŸ»ğŸ¤¥ğŸ™„"}]</JSON></grundforms>,<example><note>durch und durch</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"durch und durch",grundform:"durch und durch",emojiBeschreibung:"ğŸ’¯ğŸ‘Œ"}]</JSON></grundforms>,<example><note>voll und ganz</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"voll und ganz",grundform:"voll und ganz",emojiBeschreibung:"ğŸ¯ğŸ‘Œ"}]</JSON></grundforms>,<example><note>null und nichtig</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"null und nichtig",grundform:"null und nichtig",emojiBeschreibung:"0ï¸âƒ£ğŸš«"}]</JSON></grundforms>,<example><note>klipp und klar</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"klipp und klar",grundform:"klipp und klar",emojiBeschreibung:"âœ…"}]</JSON></grundforms>,<example><note>rein und gar</note><grundforms>[{wortart:"Redewendung",rechtschreibung:"rein und gar",grundform:"rein und gar",emojiBeschreibung:"âœ¨ğŸ‘Œ"}]</JSON></grundforms></examples>`;


const openAPIGenerator = new OpenAPIGenerator([
  grundformsOutputSchema
]);

export const grundformsPrompt = {
  schema: openAPIGenerator.generate(), 
  instructions,
  examples
};